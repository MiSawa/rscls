# RSCLS
A [language server](https://microsoft.github.io/language-server-protocol/) for [rust-script](https://rust-script.org/).

## How it works
Internally, RSCLS spawns an instance of _rust-analyzer_ on the package directory generated by _rust-script_, and proxy communications between the client (your editor) and _rust-analyzer_.
While proxying request/response/notifications, when it saw an URI that represents the rust-script sent from the client, it translates the URI to the source file in the generated package directory. And similary, when it saw an URI that represents the source file in the generated package directory sent from the server, it translates the URI to the original rust-script file.

## What works, and what doesn't
- Does NOT work on templated rust-scripts
  - Since templated rust-scripts are not valid as rust program, it's really hard to implement conversion. It's not only just add/subtract an offset to each position-typed request/response. For example, think of a code action adding `use std::collections::HashMap`. _rust-analyzer_ would think it should be added to the top part of the rust file which came from the template, but we'd have to put this to somewhere else.
- Notebook features are unhandled. Does _rust-analyzer_ even support it?
- Commands are not translated. I actually don't know how it is used yet.
- `textDocument/diagnostic`, `workspace/diagnostic`, `workspace/diagnostic/refresh` are not supported yet, as `lsp-types` doesn't have it yet.
- Translation of _Registration Options_ are unsupported yet. Esp. it's hard to translate `DocumentFilter`.


